# üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

## ‚ö†Ô∏è –í–ê–ñ–ù–û: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–§–∞–π–ª `.env` —Å–æ–¥–µ—Ä–∂–∏—Ç **–∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ** –∏ –ù–ï –¥–æ–ª–∂–µ–Ω –ø–æ–ø–∞–¥–∞—Ç—å –≤ Git!

–≠—Ç–æ—Ç —Ñ–∞–π–ª —É–∂–µ –¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore` –¥–ª—è –∑–∞—â–∏—Ç—ã.

---

## üìù –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞

### –®–∞–≥ 1: –°–∫–æ–ø–∏—Ä—É–π —à–∞–±–ª–æ–Ω

```bash
cp .env.example .env
```

### –®–∞–≥ 2: –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π .env —Ñ–∞–π–ª

```bash
nano .env
# –∏–ª–∏
vim .env
# –∏–ª–∏ –ª—é–±–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
```

### –®–∞–≥ 3: –ó–∞–ø–æ–ª–Ω–∏ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```env
# PostgreSQL Database
DB_NAME=–≤–∞—à–∞_–±–∞–∑–∞_–¥–∞–Ω–Ω—ã—Ö
DB_USER=–≤–∞—à_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
DB_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å
DB_HOST=–∞–¥—Ä–µ—Å_–≤–∞—à–µ–≥–æ_—Å–µ—Ä–≤–µ—Ä–∞
DB_PORT=5432

# Ollama Server
OLLAMA_HOST=http://–≤–∞—à_ollama_—Ö–æ—Å—Ç:11434
OLLAMA_RERANK_HOST=http://–≤–∞—à_ollama_—Ö–æ—Å—Ç:11434
EMBEDDING_MODEL=dengcao/Qwen3-Embedding-0.6B:Q8_0
RERANK_MODEL=gemma3:27b

# API Settings
API_HOST=0.0.0.0
API_PORT=8000
```

---

## üîç –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–£–±–µ–¥–∏—Å—å, —á—Ç–æ –≤ —Ç–≤–æ–µ–π PostgreSQL –±–∞–∑–µ –µ—Å—Ç—å —Ç–∞–±–ª–∏—Ü–∞:

```sql
CREATE TABLE tables_metadata (
    table_name TEXT PRIMARY KEY,
    table_description TEXT,
    description_embedding vector(1024),
    tags JSONB,
    tags_embedding vector(1024)
);
```

**–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:**
- PostgreSQL 14+ —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º `pgvector`
- –¢–∞–±–ª–∏—Ü–∞ `tables_metadata` –¥–æ–ª–∂–Ω–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å
- –≠–º–±–µ–¥–¥–∏–Ω–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã –∑–∞—Ä–∞–Ω–µ–µ

---

## üöÄ –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ `.env` –ø—Ä–æ–≤–µ—Ä—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:

```bash
# –ê–∫—Ç–∏–≤–∏—Ä—É–π –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
source vector_search_env/bin/activate

# –ó–∞–ø—É—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä
uvicorn app.main:app --host 0.0.0.0 --port 8000

# –ü—Ä–æ–≤–µ—Ä—å health endpoint
curl http://localhost:8000/health
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "status": "healthy",
  "database": "connected"
}
```

---

## ‚ùå –ß–∞—Å—Ç—ã–µ –æ—à–∏–±–∫–∏

### –û—à–∏–±–∫–∞ 1: "Database connection failed"

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ë–î

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å `DB_HOST`, `DB_PORT`, `DB_NAME`
2. –ü—Ä–æ–≤–µ—Ä—å `DB_USER` –∏ `DB_PASSWORD`
3. –£–±–µ–¥–∏—Å—å —á—Ç–æ –ë–î –¥–æ—Å—Ç—É–ø–Ω–∞ –∏–∑ —Ç–≤–æ–µ–π —Å–µ—Ç–∏
4. –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
```bash
psql -h DB_HOST -U DB_USER -d DB_NAME
```

### –û—à–∏–±–∫–∞ 2: "Ollama connection failed"

**–ü—Ä–∏—á–∏–Ω–∞:** Ollama —Å–µ—Ä–≤–µ—Ä –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å `OLLAMA_HOST`
2. –£–±–µ–¥–∏—Å—å —á—Ç–æ Ollama –∑–∞–ø—É—â–µ–Ω:
```bash
curl http://OLLAMA_HOST/api/tags
```
3. –ü—Ä–æ–≤–µ—Ä—å —á—Ç–æ –º–æ–¥–µ–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã:
```bash
curl http://OLLAMA_HOST/api/show -d '{"name":"gemma3:27b"}'
```

### –û—à–∏–±–∫–∞ 3: "relation 'tables_metadata' does not exist"

**–ü—Ä–∏—á–∏–Ω–∞:** –¢–∞–±–ª–∏—Ü–∞ –Ω–µ —Å–æ–∑–¥–∞–Ω–∞ –≤ –ë–î

**–†–µ—à–µ–Ω–∏–µ:**
–°–æ–∑–¥–∞–π —Ç–∞–±–ª–∏—Ü—É –≤ PostgreSQL (—Å–º. –≤—ã—à–µ).

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ –ß—Ç–æ –¥–µ–ª–∞—Ç—å:

- ‚úÖ –•—Ä–∞–Ω–∏ `.env` –ª–æ–∫–∞–ª—å–Ω–æ
- ‚úÖ –ù–µ –∫–æ–º–º–∏—Ç–∏—Ç—å `.env` –≤ Git
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–π —Å–∏–ª—å–Ω—ã–µ –ø–∞—Ä–æ–ª–∏
- ‚úÖ –û–≥—Ä–∞–Ω–∏—á—å –¥–æ—Å—Ç—É–ø –∫ –ë–î –ø–æ IP

### ‚ùå –ß—Ç–æ –ù–ï –¥–µ–ª–∞—Ç—å:

- ‚ùå –ù–ï –ø—É—à–∏—Ç—å `.env` –≤ GitHub
- ‚ùå –ù–ï –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å `.env` –ø–æ email
- ‚ùå –ù–ï —Ö—Ä–∞–Ω–∏—Ç—å –ø–∞—Ä–æ–ª–∏ –≤ –∫–æ–¥–µ
- ‚ùå –ù–ï –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–∞–±—ã–µ –ø–∞—Ä–æ–ª–∏

---

## üìã Checklist

- [ ] –°–æ–∑–¥–∞–ª `.env` –∏–∑ `.env.example`
- [ ] –ó–∞–ø–æ–ª–Ω–∏–ª –≤—Å–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –¥–æ—Å—Ç—É–ø –∫ PostgreSQL
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª –¥–æ—Å—Ç—É–ø –∫ Ollama
- [ ] –£–±–µ–¥–∏–ª—Å—è —á—Ç–æ `.env` –≤ `.gitignore`
- [ ] –ó–∞–ø—É—Å—Ç–∏–ª —Å–µ—Ä–≤–µ—Ä —É—Å–ø–µ—à–Ω–æ
- [ ] –ü—Ä–æ–≤–µ—Ä–∏–ª `/health` endpoint

**‚úÖ –ì–æ—Ç–æ–≤–æ? –ú–æ–∂–µ—à—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å API!**
